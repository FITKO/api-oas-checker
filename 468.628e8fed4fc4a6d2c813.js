(globalThis.webpackChunkapi_oas_checker=globalThis.webpackChunkapi_oas_checker||[]).push([[468],{8468:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>M});var t=n(7294),a=n(9669),o=n.n(a),i=n(158),c=n(1296),u=n.n(c),s=n(2106),l=n(5697),d=n.n(l),g=n(7703),h=n(9795),m=n(7595),f=n(3722),p=n(4586);const b=(0,s.QM)({editor:{height:"calc(100vh - 90px)"},editorMarginError:{backgroundColor:"var(--danger)"},editorMarginWarning:{backgroundColor:"var(--warning)"},editorHighlightLine:{backgroundColor:"var(--primary)"}}),v=({validationResults:e,focusLine:r,documentUrl:n,setDocumentText:a})=>{const c=(0,t.useRef)(null),s=(0,t.useRef)({}),l=(0,t.useRef)([]),d=b();return(0,t.useEffect)((()=>{s.current=i.editor.create(c.current,{value:"",language:"yaml",glyphMargin:!0,theme:"vs-dark",automaticLayout:!0}),s.current.onDidChangeModelContent(u()((()=>{const e=s.current.getModel().getValue();a(e)}),1e3)),s.current.changeViewZones((e=>{e.addZone({afterLineNumber:0,heightInPx:20,domNode:document.createElement("span")})}))}),[a]),(0,t.useEffect)((()=>{if(!n)return null;(async()=>{try{const{data:e}=await o().get(n);s.current.getModel().setValue(e),a(e)}catch(e){console.error(e),alert(e.message)}})()}),[n,a]),(0,t.useEffect)((()=>{if(null===e)return void(l.current=s.current.deltaDecorations(l.current,[]));const r=(0,p.Wg)(e);s.current.deltaDecorations(l.current,[]);const n=[];for(const[e,t]of r.entries())n.push({range:new i.Range(Number(e),1,Number(e),1),options:{glyphMarginClassName:(0,p.g9)(t)===f.pn?d.editorMarginError:d.editorMarginWarning}});l.current=s.current.deltaDecorations([],n)}),[e,d.editorHighlightLine,d.editorMarginError,d.editorMarginWarning]),(0,t.useEffect)((()=>{r&&(s.current.revealLineInCenter(r.line),s.current.setPosition({lineNumber:r.line,column:r.character}),s.current.focus())}),[r]),t.createElement("div",{ref:c,className:d.editor})};v.propTypes={focusLine:d().shape({line:d().number.isRequired,character:d().number.isRequired}),documentUrl:d().string,setDocumentText:d().func.isRequired,validationResults:(0,p.Hb)()};const M=(0,g.$j)((e=>({validationResults:(0,m.eE)(e),focusLine:(0,m.F$)(e),documentUrl:(0,m.uF)(e)})),{setDocumentText:h.tD})(v)}}]);